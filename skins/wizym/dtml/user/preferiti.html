<[foreach]>
<tr class="text-start" id="tr<[id]>">
    <td class="clickable-row" data-href="/products/<[id]>" style="vertical-align: middle; !important; width: 15rem">
        <[nome]>
    </td>
    <td class="clickable-row" data-href="/products/<[id]>" style="vertical-align: middle; !important;">
        <[prezzo]>€
    </td>
    <td class="clickable-row" data-href="/products/<[id]>" style="vertical-align: middle; !important;">
        <[disponibilità]>
    </td>
    <td class="clickable-row" data-href="/products/<[id]>" style="vertical-align: middle; !important;">
        <[categoria]>
    </td>
    <td class="text-start">
        <div class="heart mg-item-ct pointer" style="color: #c02323; margin-left: 2rem" data-id="<[id]>">
            <i class="fa fa-heart" aria-hidden="true"></i>
        </div>
    </td>
</tr>
<[/foreach]>

<script>
    $(document).ready(function() {
        $('.heart').click(function() {
            let id = $(this).data('id');
            $.ajax({
                type: 'POST',
                url: '/products/' + $(this).data('id') + '/like',
                data: {
                    'like': 0
                },
                success: function (data) {
                    let response = JSON.parse(data);
                    if (response['success'] === 'Dislike') {
                        $('#tr' + id).fadeOut(600, function() {
                            $(this).remove();
                        });
                    }
                }
            });
        });
    });

</script>
